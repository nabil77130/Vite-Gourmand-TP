PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE doctrine_migration_versions (version VARCHAR(191) NOT NULL, executed_at DATETIME DEFAULT NULL, execution_time INTEGER DEFAULT NULL, PRIMARY KEY (version));
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218091033','2026-02-18 09:10:33',2);
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218095423','2026-02-18 09:54:24',6);
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218122558','2026-02-18 12:25:58',3);
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218131054','2026-02-18 13:10:54',5);
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218132906','2026-02-18 13:29:07',4);
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218133227','2026-02-18 13:34:02',2);
INSERT INTO doctrine_migration_versions VALUES('DoctrineMigrations\Version20260218133603','2026-02-18 13:36:04',5);
CREATE TABLE IF NOT EXISTS "order" (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, created_at DATETIME NOT NULL, status VARCHAR(20) NOT NULL, total_price DOUBLE PRECISION NOT NULL, user_id INTEGER NOT NULL, delivery_time TIME DEFAULT NULL, event_date DATE DEFAULT NULL, equipment_loan BOOLEAN DEFAULT NULL, equipment_return BOOLEAN DEFAULT NULL, nombre_personne INTEGER DEFAULT NULL, prix_livraison DOUBLE PRECISION DEFAULT NULL, cancellation_reason CLOB DEFAULT NULL, adresse_prestation VARCHAR(255) DEFAULT NULL, CONSTRAINT FK_F5299398A76ED395 FOREIGN KEY (user_id) REFERENCES user (id) NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO "order" VALUES(20,'2026-02-16 15:33:47','delivered',25.499999999999999999,29,'19:30:00','2026-02-23',1,0,NULL,NULL,NULL,NULL);
INSERT INTO "order" VALUES(21,'2026-02-13 15:33:47','completed',45.0,29,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
CREATE TABLE product (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description CLOB DEFAULT NULL, price DOUBLE PRECISION NOT NULL, image_name VARCHAR(255) DEFAULT NULL, is_available BOOLEAN NOT NULL, category VARCHAR(20) NOT NULL);
INSERT INTO product VALUES(79,'Bruschetta','Tartines de tomates et basilic',6.5,NULL,1,'starter');
INSERT INTO product VALUES(80,'Rouleaux de Printemps','Rouleaux vietnamiens croustillants',5.0,NULL,1,'starter');
INSERT INTO product VALUES(81,'Pizza Margherita','Tomate, mozzarella, basilic',12.0,NULL,1,'main');
INSERT INTO product VALUES(82,'Pad Thai','Nouilles de riz au tofu',14.5,NULL,1,'main');
INSERT INTO product VALUES(83,'Tiramisu','Dessert au café',7.0,NULL,1,'dessert');
INSERT INTO product VALUES(84,'Salade de Fruits','Fruits de saison frais',5.0,NULL,1,'dessert');
INSERT INTO product VALUES(85,'Coca Cola','Canette 33cl',2.5,NULL,1,'drink');
INSERT INTO product VALUES(86,'Evian','Bouteille 50cl',2.0,NULL,1,'drink');
CREATE TABLE user (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, email VARCHAR(180) NOT NULL, roles CLOB NOT NULL, password VARCHAR(255) NOT NULL, first_name VARCHAR(50) NOT NULL, last_name VARCHAR(50) NOT NULL, address VARCHAR(255) DEFAULT NULL, city VARCHAR(100) DEFAULT NULL, zip_code VARCHAR(20) DEFAULT NULL, phone VARCHAR(20) DEFAULT NULL, pays VARCHAR(100) DEFAULT NULL);
INSERT INTO user VALUES(27,'admin@vite-gourmand.com','["ROLE_ADMIN"]','$2y$13$85cz360vVn5ZNfjy3073HOJNEQlh7eNPgU1Di7SxTq7T8/yAy4i56','Julie','Manager',NULL,NULL,NULL,'0600000000',NULL);
INSERT INTO user VALUES(28,'employee@vite-gourmand.com','["ROLE_EMPLOYEE"]','$2y$13$u78rT52SPgienBTb8YTS/.ADoe4KRUbRq7kNySyZIN8W1UIHHYSPm','Marc','Employé',NULL,NULL,NULL,'0611111111',NULL);
INSERT INTO user VALUES(29,'user@vite-gourmand.com','["ROLE_USER"]','$2y$13$uFqUr9hjTNwpFbKE3SzGauxuXYtB5YzwJp0caY/g1A8erlpZB1SSS','Jean','Dupont','123 Rue de Paris','Paris','75001','0612345678',NULL);
CREATE TABLE messenger_messages (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, body CLOB NOT NULL, headers CLOB NOT NULL, queue_name VARCHAR(190) NOT NULL, created_at DATETIME NOT NULL, available_at DATETIME NOT NULL, delivered_at DATETIME DEFAULT NULL);
CREATE TABLE allergen (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name VARCHAR(255) NOT NULL);
INSERT INTO allergen VALUES(29,'Arachides');
INSERT INTO allergen VALUES(30,'Produits Laitiers');
INSERT INTO allergen VALUES(31,'Gluten');
INSERT INTO allergen VALUES(32,'Soja');
CREATE TABLE diet (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name VARCHAR(255) NOT NULL);
INSERT INTO diet VALUES(29,'Végétarien');
INSERT INTO diet VALUES(30,'Vegan');
INSERT INTO diet VALUES(31,'Sans Gluten');
INSERT INTO diet VALUES(32,'Halal');
CREATE TABLE menu (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description CLOB DEFAULT NULL, price NUMERIC(10, 2) NOT NULL, min_people INTEGER DEFAULT NULL, stock INTEGER DEFAULT NULL);
INSERT INTO menu VALUES(15,'Festin Italien','Une expérience complète italienne avec entrée, plat et dessert.',22,10,15);
INSERT INTO menu VALUES(16,'Menu Végétarien','Un menu 100% végétarien, frais et savoureux.',18,5,20);
INSERT INTO menu VALUES(17,'Menu box a 10€','Box a 10€ avec une pizza et de l''eau',10,2,10);
CREATE TABLE menu_product (menu_id INTEGER NOT NULL, product_id INTEGER NOT NULL, PRIMARY KEY (menu_id, product_id), CONSTRAINT FK_5B911913CCD7E912 FOREIGN KEY (menu_id) REFERENCES menu (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_5B9119134584665A FOREIGN KEY (product_id) REFERENCES product (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO menu_product VALUES(15,79);
INSERT INTO menu_product VALUES(15,81);
INSERT INTO menu_product VALUES(15,83);
INSERT INTO menu_product VALUES(16,79);
INSERT INTO menu_product VALUES(16,80);
INSERT INTO menu_product VALUES(17,81);
INSERT INTO menu_product VALUES(17,86);
CREATE TABLE product_allergen (product_id INTEGER NOT NULL, allergen_id INTEGER NOT NULL, PRIMARY KEY (product_id, allergen_id), CONSTRAINT FK_EE0F62594584665A FOREIGN KEY (product_id) REFERENCES product (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_EE0F62596E775A4A FOREIGN KEY (allergen_id) REFERENCES allergen (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO product_allergen VALUES(80,31);
INSERT INTO product_allergen VALUES(81,31);
INSERT INTO product_allergen VALUES(81,30);
INSERT INTO product_allergen VALUES(82,29);
INSERT INTO product_allergen VALUES(82,32);
INSERT INTO product_allergen VALUES(83,30);
INSERT INTO product_allergen VALUES(83,31);
CREATE TABLE product_diet (product_id INTEGER NOT NULL, diet_id INTEGER NOT NULL, PRIMARY KEY (product_id, diet_id), CONSTRAINT FK_100C47814584665A FOREIGN KEY (product_id) REFERENCES product (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_100C4781E1E13ACE FOREIGN KEY (diet_id) REFERENCES diet (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO product_diet VALUES(79,29);
INSERT INTO product_diet VALUES(81,29);
INSERT INTO product_diet VALUES(82,31);
INSERT INTO product_diet VALUES(83,29);
INSERT INTO product_diet VALUES(84,30);
INSERT INTO product_diet VALUES(84,31);
CREATE TABLE product_theme (product_id INTEGER NOT NULL, theme_id INTEGER NOT NULL, PRIMARY KEY (product_id, theme_id), CONSTRAINT FK_36299C544584665A FOREIGN KEY (product_id) REFERENCES product (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_36299C5459027487 FOREIGN KEY (theme_id) REFERENCES theme (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO product_theme VALUES(79,29);
INSERT INTO product_theme VALUES(80,30);
INSERT INTO product_theme VALUES(81,29);
INSERT INTO product_theme VALUES(82,30);
INSERT INTO product_theme VALUES(83,29);
INSERT INTO product_theme VALUES(84,31);
CREATE TABLE theme (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name VARCHAR(255) NOT NULL);
INSERT INTO theme VALUES(29,'Italien');
INSERT INTO theme VALUES(30,'Asiatique');
INSERT INTO theme VALUES(31,'Français');
INSERT INTO theme VALUES(32,'Mexicain');
CREATE TABLE horaire (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, jour VARCHAR(20) NOT NULL, heure_ouverture VARCHAR(10) DEFAULT NULL, heure_fermeture VARCHAR(10) DEFAULT NULL, ferme BOOLEAN NOT NULL);
INSERT INTO horaire VALUES(36,'lundi','08:00','19:00',0);
INSERT INTO horaire VALUES(37,'mardi','08:00','19:00',0);
INSERT INTO horaire VALUES(38,'mercredi','08:00','19:00',0);
INSERT INTO horaire VALUES(39,'jeudi','08:00','19:00',0);
INSERT INTO horaire VALUES(40,'vendredi','08:00','19:00',0);
INSERT INTO horaire VALUES(41,'samedi','09:00','17:00',0);
INSERT INTO horaire VALUES(42,'dimanche',NULL,NULL,1);
CREATE TABLE order_item (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, quantity INTEGER NOT NULL, price_at_order DOUBLE PRECISION NOT NULL, order_ref_id INTEGER NOT NULL, product_id INTEGER DEFAULT NULL, menu_id INTEGER DEFAULT NULL, CONSTRAINT FK_52EA1F09E238517C FOREIGN KEY (order_ref_id) REFERENCES "order" (id) ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_52EA1F094584665A FOREIGN KEY (product_id) REFERENCES product (id) ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_52EA1F09CCD7E912 FOREIGN KEY (menu_id) REFERENCES menu (id) NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO order_item VALUES(25,2,12.0,20,81,NULL);
CREATE TABLE review (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, rating INTEGER NOT NULL, comment CLOB DEFAULT NULL, order_ref_id INTEGER NOT NULL, status VARCHAR(20) NOT NULL, CONSTRAINT FK_794381C6E238517C FOREIGN KEY (order_ref_id) REFERENCES "order" (id) ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE);
INSERT INTO review VALUES(10,5,'Excellent repas, arrivé chaud !',20,'approved');
INSERT INTO review VALUES(11,4,'Très bon, mais un peu de retard sur la livraison.',21,'approved');
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('user',29);
INSERT INTO sqlite_sequence VALUES('product',86);
INSERT INTO sqlite_sequence VALUES('order',21);
INSERT INTO sqlite_sequence VALUES('diet',32);
INSERT INTO sqlite_sequence VALUES('allergen',32);
INSERT INTO sqlite_sequence VALUES('theme',32);
INSERT INTO sqlite_sequence VALUES('menu',17);
INSERT INTO sqlite_sequence VALUES('horaire',42);
INSERT INTO sqlite_sequence VALUES('order_item',25);
INSERT INTO sqlite_sequence VALUES('review',11);
CREATE INDEX IDX_F5299398A76ED395 ON "order" (user_id);
CREATE UNIQUE INDEX UNIQ_IDENTIFIER_EMAIL ON user (email);
CREATE INDEX IDX_75EA56E0FB7336F0E3BD61CE16BA31DBBF396750 ON messenger_messages (queue_name, available_at, delivered_at, id);
CREATE INDEX IDX_5B911913CCD7E912 ON menu_product (menu_id);
CREATE INDEX IDX_5B9119134584665A ON menu_product (product_id);
CREATE INDEX IDX_EE0F62594584665A ON product_allergen (product_id);
CREATE INDEX IDX_EE0F62596E775A4A ON product_allergen (allergen_id);
CREATE INDEX IDX_100C47814584665A ON product_diet (product_id);
CREATE INDEX IDX_100C4781E1E13ACE ON product_diet (diet_id);
CREATE INDEX IDX_36299C544584665A ON product_theme (product_id);
CREATE INDEX IDX_36299C5459027487 ON product_theme (theme_id);
CREATE INDEX IDX_52EA1F094584665A ON order_item (product_id);
CREATE INDEX IDX_52EA1F09E238517C ON order_item (order_ref_id);
CREATE INDEX IDX_52EA1F09CCD7E912 ON order_item (menu_id);
CREATE UNIQUE INDEX UNIQ_794381C6E238517C ON review (order_ref_id);
COMMIT;
