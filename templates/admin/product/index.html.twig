{% extends 'base.html.twig' %}
{% block title %}Administration ‚Äî Plats{% endblock %}
{% block body %}
<div style="max-width:1100px;margin:2rem auto;padding:0 1rem;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;">
        <h1 style="font-size:1.8rem;font-weight:700;">ü•ó Gestion des Plats</h1>
        <div style="display:flex;gap:0.75rem;">
            <a href="{{ path('admin_menu_index') }}" style="background:rgba(99,102,241,0.1);color:#6366f1;padding:0.5rem 1rem;border-radius:0.5rem;text-decoration:none;">‚Üê Menus</a>
            <a href="{{ path('admin_product_new') }}" class="btn btn-primary" style="padding:0.5rem 1rem;">+ Nouveau plat</a>
        </div>
    </div>

    {% for flash in app.flashes('success') %}
        <div style="background:rgba(16,185,129,0.15);border:1px solid rgba(16,185,129,0.4);color:#065F46;border-radius:0.5rem;padding:1rem;margin-bottom:1rem;">‚úÖ {{ flash }}</div>
    {% endfor %}

    <div style="background:white;border-radius:1rem;box-shadow:0 2px 12px rgba(0,0,0,0.08);overflow:hidden;">
        <table style="width:100%;border-collapse:collapse;">
            <thead>
                <tr style="background:#f9fafb;border-bottom:2px solid #e5e7eb;">
                    <th style="padding:1rem;text-align:left;">Nom</th>
                    <th style="padding:1rem;text-align:left;">Cat√©gorie</th>
                    <th style="padding:1rem;text-align:left;">Prix</th>
                    <th style="padding:1rem;text-align:left;">Disponible</th>
                    <th style="padding:1rem;text-align:center;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr style="border-bottom:1px solid #f3f4f6;">
                    <td style="padding:1rem;font-weight:600;">{{ product.name }}</td>
                    <td style="padding:1rem;">
                        <span style="background:#f3f4f6;padding:0.2rem 0.6rem;border-radius:999px;font-size:0.8rem;">
                            {% if product.category == 'starter' %}Entr√©e
                            {% elseif product.category == 'main' %}Plat
                            {% elseif product.category == 'dessert' %}Dessert
                            {% else %}Boisson{% endif %}
                        </span>
                    </td>
                    <td style="padding:1rem;color:var(--secondary-color);font-weight:700;">{{ product.price }} ‚Ç¨</td>
                    <td style="padding:1rem;">{{ product.isAvailable ? '‚úÖ' : '‚ùå' }}</td>
                    <td style="padding:1rem;text-align:center;display:flex;gap:0.5rem;justify-content:center;">
                        <a href="{{ path('admin_product_edit', {id: product.id}) }}" style="background:rgba(99,102,241,0.1);color:#6366f1;padding:0.4rem 0.8rem;border-radius:0.4rem;text-decoration:none;font-size:0.85rem;">‚úèÔ∏è Modifier</a>
                        <form method="post" action="{{ path('admin_product_delete', {id: product.id}) }}" onsubmit="return confirm('Supprimer ce plat ?')">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ product.id) }}">
                            <button type="submit" style="background:rgba(239,68,68,0.1);color:#ef4444;padding:0.4rem 0.8rem;border-radius:0.4rem;border:none;cursor:pointer;font-size:0.85rem;">üóëÔ∏è</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr><td colspan="5" style="padding:2rem;text-align:center;color:#9ca3af;">Aucun plat pour l'instant.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
